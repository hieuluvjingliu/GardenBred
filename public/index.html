<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Garden Bred Game — MVP</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
<div class="app">
  <header>
    <h1>Garden Bred Game — MVP</h1>

    <div id="auth">
      <input id="username" placeholder="Enter username" />
      <button id="btnLogin">Login</button>
    </div>

    <!-- HUD (ẩn khi chưa đăng nhập) -->
    <div id="hud" class="hidden">
      <span class="pill">
        <svg class="ico user" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg>
        <b id="hudUser"></b>
      </span>
      <span class="pill">
        <svg class="ico coin" viewBox="0 0 24 24"><circle cx="12" cy="12" r="8"/></svg>
        <b id="hudCoins">0</b>
      </span>
      <!-- ĐÃ GỠ miniHud ở đây -->
    </div>
  </header>

  <nav class="tabs hidden" id="tabs">
    <button data-tab="shop" class="active">🛒 Shop</button>
    <button data-tab="inventory">📦 Kho</button>
    <button data-tab="breed">🧬 Lai</button>
    <button data-tab="online">🌐 Online</button>
    <button data-tab="market">🪙 Chợ trời</button>
    <button data-tab="farm">🌱 Khu trồng</button>
  </nav>

  <!-- SHOP -->
  <section id="shop" class="tab">
    <h2>Shop</h2>
    <div class="subtabs" id="shopTabs">
      <button data-sub="shopSeeds" class="active">Seeds</button>
      <button data-sub="shopPots">Pots</button>
      <button data-sub="shopTrap">Trap</button>
    </div>
    <div id="shopSeeds" class="subtab"><div id="seedShopGrid" class="shop-grid"></div></div>
    <div id="shopPots" class="subtab hidden"><div id="potShopGrid" class="shop-grid"></div></div>
    <div id="shopTrap" class="subtab hidden">
      <div class="card">
        <h3>Trap</h3>
        <p>Giá hiện tại: <b id="trapPrice">-</b>; Tối đa: <b id="trapMax">-</b></p>
        <button id="buyTrap">Buy Trap</button>
      </div>
    </div>
  </section>

  <!-- INVENTORY -->
  <section id="inventory" class="tab hidden">
    <h2>Kho</h2>
    <div class="subtabs">
      <button data-sub="inv-seeds" class="active">Seeds (Not Planted)</button>
      <button data-sub="inv-pots">Pots</button>
      <button data-sub="inv-mature">Mature</button>
    </div>

    <!-- Seeds (Not Planted) + Filters + Plant All -->
    <div id="inv-seeds" class="subtab">
      <div class="row" id="invSeedFilters" style="gap:8px;flex-wrap:wrap;margin-bottom:8px;">
        <select id="fltInvState" title="State"> … </select>
        <select id="fltInvClass" title="Class"> … </select>
        <select id="fltInvMut" title="Mutation"> … </select>
        <button id="btnPlantAll" class="btn">Plant All (filtered)</button>
      </div>

      <div class="inv-split">
        <ul id="invMaster" class="inv-master"></ul>
        <ul id="invDetail" class="inv-detail"></ul>
      </div>

      <!-- GIỮ bản Sell to Shop ở đây -->
      <h3>Sell to Shop</h3>
      <div class="row">
        <select id="sellSeedSelect"></select>
        <button id="btnSellShop">Sell</button>
      </div>
    </div>

    <!-- ĐÃ GIỮ nguyên split view, và GỠ bản Sell to Shop trùng ở dưới -->
    <div id="inv-pots" class="subtab hidden"><ul id="potInv" class="inv-grid"></ul></div>
    <div id="inv-mature" class="subtab hidden">
      <div class="row" id="batchListBar" style="gap:8px;flex-wrap:wrap;margin-bottom:8px;">
        <button id="btnSelectAllMat">Select All</button>
        <input id="batchAskPrice" placeholder="ask price (áp cho tất cả)" />
        <button id="btnListBatch">List Selected</button>
      </div>
      <ul id="matureByClass" class="inv-grid"></ul>
    </div>
  </section>

  <!-- BREED -->
  <section id="breed" class="tab hidden">
    <h2>Lai</h2>
    <div class="row">
      <select id="breedSelectA"></select>
      <select id="breedSelectB"></select>
      <button id="btnBreed">Breed</button>
      <button id="btnRandomBreed" class="btn btn-ghost">Random Breed</button>
    </div>
    <p id="breedOut" class="breed-out"></p>
  </section>

  <!-- ONLINE -->
  <section id="online" class="tab hidden">
    <h2>Online Players</h2>
    <ul id="onlineList"></ul>
  </section>

  <!-- MARKET -->
  <section id="market" class="tab hidden">
    <h2>Chợ trời</h2>
    <div class="row">
      <select id="listSeedSelect"></select>
      <input id="listPrice" placeholder="ask price" />
      <button id="btnList">List</button>
    </div>
    <h3>Listings</h3>
    <ul id="marketList"></ul>
  </section>

  <!-- FARM -->
  <section id="farm" class="tab hidden">
    <h2>Khu trồng</h2>
    <div class="row" id="farmControls" style="gap:8px;flex-wrap:wrap;">
      <button id="btnPrevFloor">↑ Floor</button>
      <button id="btnNextFloor">↓ Floor</button>
      <button id="btnHarvestAll">Harvest All Mature</button>
      <!-- ĐÃ GỠ nút Remove Mode và Map -->
      <span id="buyFloorPrice" style="margin-left:8px; display:none;"></span>
      <button id="btnBuyFloor" style="display:none;">Buy Floor</button>
    </div>

    <div id="floors"></div>

    <!-- ĐÃ GỠ modal Farm Map -->
  </section>
</div>

<div id="toastContainer" class="notify-wrap" aria-live="polite" aria-atomic="true"></div>
<script src="/client.js" defer></script>
</body>
</html>
